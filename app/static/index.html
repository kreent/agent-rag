<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agente de BÃºsqueda RAG</title>
  <meta name="description" content="Consulta informaciÃ³n procesada por inteligencia artificial.">
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">
  <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-section">
        <h3 class="sidebar-title">FUENTES DE DATOS</h3>
        <div class="source-item">
          <div class="source-icon" style="background: #e8f4fd; color: #1a7fb5;">ğŸ“„</div>
          <div class="source-info">
            <strong>Documentos Internos</strong>
            <span id="docCountSidebar">Cargando...</span>
          </div>
        </div>
        <div class="source-item">
          <div class="source-icon" style="background: #e8fdf0; color: #1ab56a;">ğŸŒ</div>
          <div class="source-info">
            <strong>Datos de API</strong>
            <span>Indexados y actualizados</span>
          </div>
        </div>
        <div class="source-item">
          <div class="source-icon" style="background: #f0e8fd; color: #7b1ab5;">ğŸ“Š</div>
          <div class="source-info">
            <strong>Base de Conocimiento</strong>
            <span>BÃºsqueda semÃ¡ntica activa</span>
          </div>
        </div>
      </div>

      <div class="sidebar-section">
        <h3 class="sidebar-title">CONSULTAS RECIENTES</h3>
        <ul class="recent-list" id="recentList">
          <li class="recent-empty">AÃºn no hay consultas</li>
        </ul>
      </div>

      <button class="btn-new-chat" id="newChatBtn">
        <span>+</span> Nuevo Chat
      </button>
    </aside>

    <!-- Mobile sidebar toggle -->
    <button class="sidebar-toggle" id="sidebarToggle">â˜°</button>
    <!-- Mobile sidebar overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Main Content -->
    <main class="main">
      <!-- Header -->
      <header class="main-header">
        <h1>Agente de BÃºsqueda RAG</h1>
        <p>Consulta informaciÃ³n tÃ©cnica procesada por inteligencia artificial.</p>
      </header>

      <!-- Chat Area -->
      <div class="chat-area" id="chatArea">
        <div class="messages" id="messages">
          <!-- Welcome message from agent -->
          <div class="message agent">
            <div class="message-avatar"><img src="/static/avatar.png" alt="Bot" class="avatar-img"></div>
            <div class="message-bubble">
              <p>Â¡Hola! Soy el asistente inteligente. Â¿En quÃ© puedo ayudarte hoy? Puedo buscar informaciÃ³n en documentos
                internos y datos indexados desde APIs externas.</p>
            </div>
          </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator" id="typingIndicator">
          <div class="message-avatar">ğŸ¤–</div>
          <div class="typing-dots">
            <span></span><span></span><span></span>
          </div>
        </div>
      </div>

      <!-- Input Area -->
      <div class="input-area">
        <div class="input-container">
          <textarea id="chatInput" placeholder="Escribe tu consulta aquÃ­..." rows="1"></textarea>
          <button class="btn-send" id="sendBtn" title="Enviar">â¤</button>
        </div>
        <div class="input-actions">
          <button class="action-link" id="regenerateBtn" style="display:none">â†» Re-generar respuesta</button>
        </div>
      </div>

      <!-- Suggestions Bar -->
      <div class="suggestions-bar">
        <span class="suggestions-label">SUGERENCIAS RÃPIDAS:</span>
        <div class="suggestions">
          <button class="suggestion">Â¿QuÃ© documentos tienes?</button>
          <button class="suggestion">Â¿CuÃ¡l es el organigrama?</button>
          <button class="suggestion">Buscar informaciÃ³n sobre alertas</button>
        </div>
        <button class="btn-theme-toggle" id="themeToggle" title="Modo oscuro">ğŸŒ™</button>
      </div>
    </main>
  </div>

  <!-- Error Toast -->
  <div class="error-toast" id="errorToast"></div>

  <script src="/static/chat.js"></script>
</body>

</html>